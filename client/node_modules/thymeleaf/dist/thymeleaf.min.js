var Thymeleaf=function(e){"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(r){t(e,r,n[r])})}return e}const n=e=>(t,r)=>{let n=r.parseWithExpression(t,e);return null!==n&&t.exhausted()?n:null},s=e=>e;class i{constructor(e,t,r=s){this.name=e,this.expression=t,this.matchProcessor=r}accept(e,t){let{expression:r,name:n}=this;return t.trackExpression(e,r,n,()=>{let n=t.parseWithExpression(e,r);return null!==n?this.matchProcessor(n):null})}}class a extends i{constructor(e,t,r){super(e,t,r||(e=>(...t)=>"function"==typeof e?e.apply(null,t):e))}}class o{constructor(e,t,...r){this.name=e,this.rules=[].concat(t,r)}accept(e,t){return this.startingRule.accept(e,t)}findRuleByName(e){let t=this.rules.find(t=>t.name===e);if(!t)throw new Error(`Failed to find a rule named "${e}" in the grammar`);return t}get startingRule(){return this.rules[0]}}const l=e=>(t,r)=>t.markAndClearOrReset(()=>{let n=r.parseWithExpression(t,e);return null!==n?n:""}),c=(...e)=>(t,r)=>t.markAndClearOrReset(()=>{for(let n of e){let e=t.markAndClearOrReset(()=>r.parseWithExpression(t,n));if(null!==e)return e}return null}),u=(...e)=>(t,r)=>t.markAndClearOrReset(()=>{let n=[];for(let s of e){let e=t.markAndClearOrReset(()=>r.parseWithExpression(t,s));if(null===e)return null;n.push(e)}return n}),p=e=>(t,r)=>t.markAndClearOrReset(()=>{let n=[];for(;;){let s=t.markAndClearOrReset(()=>r.parseWithExpression(t,e));if(!s)break;n.push(s)}return n});class m{constructor(e){t(this,"position",0),t(this,"positionStack",[]),this.input=e}clear(){if(void 0===this.positionStack.pop())throw new Error("Called clear() but no matching mark()")}exhausted(){return this.position===this.input.length}mark(){this.positionStack.push(this.position)}markAndClearOrReset(e){this.mark();let t=e();return null!==t?(this.clear(),t):(this.reset(),null)}read(e){let t=this.input.substring(this.position),r=t.match(/^\s+/);r&&(r=r[0],t=t.substring(r.length));let n=new RegExp(e.source).exec(t);if(n){let[e]=n;if(t.startsWith(e))return this.position+=e.length+(r?r.length:0),n}return null}reset(){let e=this.positionStack.pop();if(void 0===e)throw new Error("Called reset() but no matching mark()");this.position=e}}function h(e){return e.reduce((e,t)=>e.concat(Array.isArray(t)?h(t):t),[])}function f(e,t){return e.find((r,n)=>{if(t(r))return e.splice(n,1),r})}var d=new o("Thymeleaf Expression Language",new a("ThymeleafExpression",c(n("VariableExpression"),n("LinkExpression"),n("FragmentExpression"),n("Iteration"),n("StringConcatenation"),n("ScopedVariables"),n("Literal"),n("LogicalExpression"),n("IfThenCondition"),n("IfThenElseCondition"),n("TokenLiteral"),n("Nothing"))),new a("VariableExpression",u(/\${/,"Chain",/\}/),([,e])=>t=>{let r=e(t);return null!=r?r:""}),new a("Chain",u(l("Negation"),"ChainLink",p(u(/\./,"ChainLink"))),([e,...t])=>r=>{let n=h(t).filter(e=>"."!==e).reduce((e,t)=>null==e?e:t(e,r),r);return"function"==typeof e?!n:n}),new a("ChainLink",c("MethodCall","PropertyName","Literal")),new a("Negation",/!/),new a("LinkExpression",((e,t)=>(r,n)=>r.markAndClearOrReset(()=>{let s=r.read(e);if(s){let e=[s[0]];for(let r=1;r<s.length;r++){let i=s[r];if(void 0!==i){let s=n.parseWithExpression(new m(i),t[r-1]);if(null===s)return null;e.push(s)}}return e}return null}))(/^@\{(.+?)(\(.+\))?\}$/,["Url","UrlParameters"]),([,e,t])=>r=>{let n=e(r);if(t){let e=new E,s=t(r).slice(1,-1).split(",").map(t=>{let[n,s]=t.split("=");return[n,e.process(s,r)]});for(;;){let e=/(.*?)\{(.+?)\}(.*)/.exec(n);if(!e)break;{let[,t,r,i]=e,a=f(s,([e])=>e===r);a&&(n=`${t}${a[1]}${i}`)}}s.length&&(n+=`?${s.map(([e,t])=>`${e}=${t}`).join("&")}`)}return n}),new a("Url",/.+/),new a("UrlParameters",/\((.+)\)/),new a("FragmentExpression",u(/~{/,"TemplateName",/::/,"FragmentName",l("FragmentParametersSection"),/}/),([,e,,t,r])=>n=>({type:"fragment",templateName:e(n),fragmentName:t(n),parameters:r?r(n):null})),new a("TemplateName",/[\w-._\/]+/),new a("FragmentName",/[\w-._]+/),new a("FragmentParametersSection",u(/\(/,l("FragmentParameters"),/\)/),([,e])=>t=>e(t)),new a("FragmentParameters",u("Expression",p(u(/,/,"Expression"))),e=>t=>e?h(e).filter(e=>","!==e).map(e=>e(t)):[]),new a("Iteration",u("Identifier",l(u(/,/,"Identifier")),/:/,"VariableExpression"),([e,[,t],,r])=>n=>({type:"iteration",localValueName:e(n),iterable:r(n),iterationStatusVariable:t?t(n):null})),new a("StringConcatenation",u("Concatenatable",(e=>(t,r)=>t.markAndClearOrReset(()=>{let n=[];for(;;){let s=t.markAndClearOrReset(()=>r.parseWithExpression(t,e));if(!s)break;n.push(s)}return n.length>0?n:null}))(u(/\+/,"Concatenatable"))),e=>t=>h(e).filter(e=>"+"!==e).reduce((e,r)=>e+("function"==typeof r?r(t):r),"")),new a("Concatenatable",c("StringLiteral","VariableExpression")),new a("ScopedVariables",u("ScopedVariable",p(u(/,/,"ScopedVariable"))),e=>t=>h(e).map(e=>e(t))),new a("ScopedVariable",u("Identifier",/=/,"Expression"),([e,,t])=>r=>({name:e(r),value:t(r)})),new a("Literal",c("StringLiteral","NumberLiteral","BooleanLiteral","NullLiteral")),new a("StringLiteral",/'.*?(?!\\').'/,e=>()=>e.slice(1,-1).replace(/\\/g,"")),new a("NumberLiteral",/\d+(\.\d+)?/,e=>()=>parseFloat(e)),new a("BooleanLiteral",/(true|false)/,e=>()=>"true"===e),new a("NullLiteral",/null/,()=>()=>null),new a("TokenLiteral",/[^: ${}]+/,e=>()=>e),new a("LogicalExpression",u("Expression","Comparator","Expression"),([e,t,r])=>n=>{let s=e(n),i=r(n);switch(t(n)){case"==":return s==i;case"===":return s===i}return!1}),new a("Comparator",c(/===?/)),new a("IfThenCondition",u("Condition",/\?/,"Expression"),([e,,t])=>r=>e(r)?t(r):void 0),new a("IfThenElseCondition",u("Condition",/\?/,"Expression",/:/,"Expression"),([e,,t,,r])=>n=>e(n)?t(n):r(n)),new a("Condition",c("LogicalExpression","Expression")),new a("Nothing",/^$/),new a("Identifier",/[#a-zA-Z_][\w]*/),new a("PropertyName","Identifier",e=>t=>{let r=e(t);return t.hasOwnProperty(r)?t[r]:""}),new a("MethodCall",u("MethodName",/\(/,l("MethodParameters"),/\)/),([e,,t])=>(r,n)=>{let s=e(r),i=r[s];return i?i.apply(null,t(n||r)):(console.warn(`No method '${s}' present on the current context.  Expression: ${r.expression}`),"")}),new a("MethodName","Identifier"),new a("MethodParameters",u("Chain",p(u(/,/,"Chain"))),e=>t=>e?h(e).filter(e=>","!==e).map(e=>e(t)):[]),new a("Expression",c("VariableExpression","StringConcatenation","Literal")));class w{constructor(e){t(this,"expressionStack",[]),this.grammar=e}parse(e){let t=new m(e),r=this.grammar.accept(t,this);if(null===r||!t.exhausted()){let t=`Failed to parse "${e}"`;if("production"===process.env.NODE_ENV)return console.error(t),null;throw new Error(t)}return r}parseWithExpression(e,t){if("string"==typeof t){let r=this.grammar.findRuleByName(t);return r?r.accept(e,this):null}if(t instanceof RegExp){let r=e.read(t);if(r)return r[0]}else if("function"==typeof t)return t(e,this);return null}trackExpression(e,t,r,n){let s=this.expressionStack.push({name:r,expression:"function"!=typeof t?t.toString():null,input:e.input.substring(e.position)}),i=n();return null!==i?i:(this.expressionStack.splice(s-1),null)}}class E{constructor(e=d){this.grammar=e}process(e,t={}){let n=new w(this.grammar).parse(e);return n?n(r({},t,{expression:e})):null}}class g{constructor(e,t){this.prefix=e,this.name=t}}class x extends g{constructor(e){super(e,x.NAME)}process(e,t,r,n){/(.+=.+,)*.+=.+/.test(r)?r.split(",").forEach(t=>{let r=t.split("=");e.setAttribute(r[0],function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}((new E).process(r[1],n)))}):"test"!==process.env.NODE_ENV&&console.warn(`Value to ${t}, ${r}, doesn't seem to contain an attribute assignment expression.  Ignoring.`),e.removeAttribute(t)}}t(x,"NAME","attr");class A{constructor(e,t){this.prefix=e,this.name=t}}class b extends A{constructor(e){super(e,b.NAME)}process(e,t){let n=e.parentElement;for(;e.firstChild;){let t=e.firstChild;n.insertBefore(t,e),t instanceof Element&&e.__thymeleafLocalVariables&&(t.__thymeleafLocalVariables=r({},t.__thymeleafLocalVariables||{},e.__thymeleafLocalVariables))}return n.removeChild(e),!0}}t(b,"NAME","block");class N extends g{constructor(e){super(e,N.NAME)}process(e,t,r,n){(new E).process(r,n)?e.setAttribute("checked",""):e.removeAttribute("checked"),e.removeAttribute(t)}}t(N,"NAME","checked");class C extends g{constructor(e){super(e,C.NAME)}process(e,t,r,n){let s=(new E).process(r,n);s&&(e.className+=` ${s}`),e.removeAttribute(t)}}t(C,"NAME","classappend");class y extends g{constructor(e){super(e,y.NAME)}process(e,t,r,n){e.removeAttribute(t);let s=(new E).process(r,n);if(s){let{localValueName:t,iterable:r}=s,n=e.cloneNode(!0);for(let s of r){let r=n.cloneNode(!0);r.__thymeleafLocalVariables={[t]:s},e.parentElement.appendChild(r)}}return e.parentElement.removeChild(e),!0}}t(y,"NAME","each");class v extends g{constructor(e,t){super(e,t)}process(e,t,r,n){let s=(new E).process(r,n);e.setAttribute(this.name,s?s.toString():""),e.removeAttribute(t)}}const M=["datetime","href","src","style","value"];class k extends g{constructor(e){super(e,k.NAME)}process(e,t,r,n){e.removeAttribute(t)}}function $(e){for(;e.firstChild;)e.removeChild(e.firstChild)}t(k,"NAME","fragment");class L extends g{constructor(e){super(e,L.NAME)}process(e,t,r,n){if(!(new E).process(r,n))return $(e),e.parentNode.removeChild(e),!0;e.removeAttribute(t)}}t(L,"NAME","if");var S=new o("Thymeleaf fragment signature",new a("ThymeleafFragmentSignatureRule",n("FragmentSignature")),new a("FragmentSignature",u("FragmentName",l("FragmentParameters")),([e,t])=>r=>({fragmentName:e(r),parameterNames:t?t(r):null})),new a("FragmentName",/[\w-._]+/),new a("FragmentParameters",u(/\(/,p("FragmentParameterNames"),/\)/),([,[e]])=>t=>e(t)),new a("FragmentParameterNames",u("Identifier",p(u(/,/,"Identifier"))),e=>t=>e?h(e).filter(e=>","!==e).map(e=>e(t)):[]),new a("Identifier",/[#a-zA-Z_][\w]*/));function F(e,t,r){return e.getAttribute(`${t}:${r}`)||e.getAttribute(`data-${t}-${r}`)}function O(e){return require("@ultraq/dom-utils").deserialize(e)}var _="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var R,P=(function(e){!function(t,r){if(e.exports)e.exports=r();else{var n=r();Object.keys(n).forEach(function(e){t[e]=n[e]})}}(_,function(){return{$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}}})}(R={exports:{}},R.exports),R.exports),V=P.$;P.$$;async function I(e,t){let{templateResolver:r}=t;if(r){let{templateName:n,fragmentName:s}=e,i=O(await r(n)),a=t.dialects.find(e=>e.name===G.NAME).prefix,o=k.NAME;return V(`[${a}\\:${o}^="${s}"]`,i)||V(`[data-${a}-${o}^="${s}"]`,i)}return console.log("No template resolver configured"),null}class T extends g{constructor(e){super(e,T.NAME)}async process(e,t,r,n){e.removeAttribute(t),$(e);let s=(new E).process(r,n);if(s){let t=await I(s,n);if(t){let r=F(t,n.dialects.find(e=>e.name===G.NAME).prefix,k.NAME),{parameterNames:i}=new E(S).process(r,n);if(i){let{parameters:e}=s,r={};i.forEach((t,n)=>{r[t]=e[t]||e[n]||null}),t.__thymeleafLocalVariables=r}return e.appendChild(t),!0}}return!1}}t(T,"NAME","insert");class j extends g{constructor(e,t){super(e,t)}process(e,t,r,n){let s=(new E).process(r,n);s?e.setAttribute(this.name,s.toString()):e.removeAttribute(this.name),e.removeAttribute(t)}}const D=["alt","class"];class W extends g{constructor(e){super(e,W.NAME)}process(e,t,r,n){switch(e.removeAttribute(t),r){case"all":return e.parentElement.removeChild(e),!0;case"all-but-first":for(;e.lastElementChild!==e.firstElementChild;)e.removeChild(e.lastElementChild);return!1}}}t(W,"NAME","remove");class U extends g{constructor(e){super(e,U.NAME)}async process(e,t,r,n){e.removeAttribute(t),$(e);let s=(new E).process(r,n);if(s){let t=await I(s,n);if(t){let r=F(t,n.dialects.find(e=>e.name===G.NAME).prefix,k.NAME),{parameterNames:i}=new E(S).process(r,n);if(i){let{parameters:e}=s,r={};i.forEach((t,n)=>{r[t]=e[t]||e[n]||null}),t.__thymeleafLocalVariables=r}return e.parentElement.insertBefore(t,e),e.remove(),!0}}return e.remove(),!1}}t(U,"NAME","replace");class q extends g{constructor(e){super(e,q.NAME)}process(e,t,r,n){e.textContent=(new E).process(r,n),e.removeAttribute(t)}}t(q,"NAME","text");class B extends g{constructor(e){super(e,B.NAME)}process(e,t,r,n){(new E).process(r,n)&&($(e),e.parentNode.removeChild(e)),e.removeAttribute(t)}}t(B,"NAME","unless");class z extends g{constructor(e){super(e,z.NAME)}process(e,t,r,n){e.innerHTML=(new E).process(r,n),e.removeAttribute(t)}}t(z,"NAME","utext");class X extends g{constructor(e){super(e,X.NAME)}process(e,t,r,n){e.removeAttribute(t);let s={};return(new E).process(r,n).forEach(({name:e,value:t})=>{s[e]=t}),e.__thymeleafLocalVariables=s,!0}}t(X,"NAME","with");class Z{constructor(e,t){this.name=e,this.prefix=t}get expressionObjects(){return null}get processors(){return null}}class G extends Z{constructor(e=G.DEFAULT_PREFIX){super(G.NAME,e)}get processors(){let{prefix:e}=this;return[new T(e),new U(e),new y(e),new L(e),new B(e),new X(e),new x(e),new C(e),...M.map(t=>new v(e,t)),...D.map(t=>new j(e,t)),new N(e),new q(e),new z(e),new k(e),new W(e),new b(e)]}}t(G,"NAME","Standard"),t(G,"DEFAULT_PREFIX","thjs");const H={dialects:[new G]},J=r({},H,{dialects:[new G("th")],isomorphic:{prefix:"thjs"}});class K{constructor(e,t){this.context=e,this.isomorphic=t}matches(e,t){let{name:r}=t;if(t instanceof g){let n=[].concat(this.isomorphic?this.isomorphic.prefix:[],t.prefix);for(let t of n){let n;if(n=`${t}:${r}`,e.hasAttribute(n))return n;if(n=`data-${t}-${r}`,e.hasAttribute(n))return n}}else if(t instanceof A){let n=`${t.prefix}:${r}`;if(e.tagName===n.toUpperCase())return n}return null}}const Q=`xmlns:${G.DEFAULT_PREFIX}`;return e.STANDARD_CONFIGURATION=J,e.TemplateEngine=class{constructor({dialects:e,isomorphic:t,templateResolver:n}=H){this.dialects=e,this.isomorphic=t,this.templateResolver=n,this.processors=e.reduce((e,{processors:t})=>t?[...e,...t]:e,[]),this.expressionObjects=e.reduce((e,{expressionObjects:t})=>t?r({},e,t):e,{})}process(e,t={}){let n=O(e),s=n.firstElementChild;return this.processNode(s,r({},t,this.expressionObjects,{dialects:this.dialects,templateResolver:this.templateResolver})).then(()=>(s.hasAttribute(Q)&&s.removeAttribute(Q),function(e){return require("@ultraq/dom-utils").serialize(e)}(n)))}processFile(e,t={}){return Promise.reject(new Error("Cannot use fs.readFile inside a browser"))}async processNode(e,t={}){let n=r({},t,e.__thymeleafLocalVariables||{}),s=new K(n,this.isomorphic);for(let t=0;t<this.processors.length;t++){let r=this.processors[t],i=!1,a=s.matches(e,r);if(a&&(r instanceof g?i=await r.process(e,a,e.getAttribute(a),n):r instanceof A&&(i=await r.process(e,n))),i)return!0}for(let t=0;t<e.children.length;){let r=e.children[t];await this.processNode(r,n)||t++}}},e.Dialect=Z,e.AttributeProcessor=g,e.ExpressionProcessor=E,e.StandardDialect=G,e}({});
//# sourceMappingURL=thymeleaf.min.js.map
